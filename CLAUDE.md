# CLAUDE.md\n\nThis file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.\n\n## Common Commands\n\nMonorepo (root):\n- Dev: `turbo dev --filter=./apps/web`\n- Build: `turbo build --filter=./apps/web`\n- Test: `turbo run test --filter=./apps/web`\n- Lint: `turbo lint`\n\nWeb app:\n- Dev: `pnpm dev` (in apps/web)\n- Build: `pnpm build`\n- Start: `pnpm start`\n- Lint: `pnpm lint`\n- Test all: `pnpm test`\n- Test AI: `pnpm test-ai`\n- Test single: `pnpm test __tests__/test-file.test.ts`\n- Test specific AI: `pnpm test-ai ai-categorize-senders`\n\n## High-Level Architecture\n\nTurborepo monorepo with pnpm workspaces.\n\n- Apps:\n  - web: Next.js app for UI and API routes, using Prisma, Redis, AI integrations.\n  - unsubscriber: Fastify/Playwright service for email unsubscribes.\n  - mcp-server: Custom backend server.\n\n- Packages: Shared libs for email (loops, resend), analytics (tinybird), configs.\n\nKey tech: Next.js, React, Tailwind, shadcn/ui, Prisma (Postgres), Upstash Redis, various LLMs, Gmail API.\n\nData flow: Gmail webhooks → API routes → AI processing → actions (archive, reply). Queues for async tasks. Sanity CMS for content.\n\nFrom README: Self-host with Google OAuth, PubSub; dev setup via docker-compose for Postgres/Redis.\n\n## Improvements to Existing CLAUDE.md (in apps/web)\n\n- Move to root for monorepo-wide guidance.\n- Add monorepo turbo commands.\n- Include architecture overview.\n- Reference README for setup details.